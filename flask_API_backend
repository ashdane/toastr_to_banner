from flask import Flask, jsonify
import subprocess

# code beneath allows for proper connection between Angular component and this flask API
from flask_cors import CORS
app = Flask(__name__)
# CORS stands for (cross origin resource sharing)
CORS(app) 

@app.route('/api/execute-script', methods=['GET', 'POST'])
def execute_script():
    try:
        result = subprocess.run(['python', 'C:/Users/Daniel Ashish/Desktop/python_parser.py'], capture_output=True, text=True)
        conversion = result.stdout
        return jsonify({'result': conversion}), 
# following code catches errors
    except Exception as error_message:
        return jsonify({'error': str(error_message)}), 500
    

# code seen below only executes if the "context" is the same, that is, __name__ is __main__
if __name__ == '__main__':
    app.run(debug=True)

